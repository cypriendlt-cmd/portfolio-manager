/* =========================================================
   âœ… RESPONSIVE PATCH (Ã  coller tout en bas)
   ========================================================= */

/* 1) Variables fluides (paddings / tailles) */
:root{
  --sidebar-w: 260px;
  --sidebar-w-collapsed: 80px;

  --pad-page: clamp(16px, 2.5vw, 48px);
  --pad-card: clamp(16px, 2vw, 28px);

  --h1-size: clamp(1.2rem, 2.5vw, 2.2rem);
  --stat-value-size: clamp(1.6rem, 3.2vw, 2.4rem);
}

/* 2) Typo / container fluides */
.main-content{
  padding: var(--pad-page);
}

h1{
  font-size: var(--h1-size);
}

.stat-card{
  padding: var(--pad-card);
}

.stat-value{
  font-size: var(--stat-value-size);
}

/* 3) Grilles qui sâ€™adaptent naturellement */
.stats-grid{
  grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
}

/* Asset header: autoriser le wrap et Ã©viter le min-width bloquant */
.asset-header{
  flex-wrap: wrap;
}

.asset-stats{
  min-width: 0;            /* ðŸ”¥ important : Ã©vite le dÃ©bordement */
  width: 100%;
  grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
  text-align: left;        /* plus lisible quand Ã§a wrap */
}

/* Chart: hauteur flexible */
.chart-container{
  height: clamp(220px, 45vh, 450px);
  padding: clamp(16px, 2.5vw, 36px);
}

/* 4) TABLET (<= 1024px) : sidebar â€œcompacteâ€ */
@media (max-width: 1024px){
  .sidebar{
    width: var(--sidebar-w-collapsed);
    padding: 24px 12px;
  }

  .logo{
    font-size: 1.2em;
    text-align: center;
    margin-bottom: 32px;
  }

  .nav-item span:not(.icon){
    display: none;
  }

  .main-content{
    margin-left: var(--sidebar-w-collapsed);
  }

  header{
    gap: 12px;
    flex-wrap: wrap; /* Ã©vite que Ã§a dÃ©borde */
  }
}

/* 5) MOBILE (<= 768px) : sidebar en drawer + overlay */
@media (max-width: 768px){
  /* Bouton hamburger */
  .mobile-menu-toggle{
    display: flex !important;
    position: fixed;
    top: 16px;
    left: 16px;
    z-index: 2001;
    width: 44px;
    height: 44px;
    background: var(--bg-card);
    border: 1px solid var(--border-subtle);
    border-radius: 12px;
    cursor: pointer;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    gap: 5px;
    padding: 0;
  }

  .mobile-menu-toggle span{
    display: block;
    width: 24px;
    height: 2px;
    background: var(--text-primary);
    border-radius: 2px;
    transition: all 0.3s ease;
  }

  body.menu-open .mobile-menu-toggle span:nth-child(1){
    transform: rotate(45deg) translate(6px, 6px);
  }
  body.menu-open .mobile-menu-toggle span:nth-child(2){
    opacity: 0;
  }
  body.menu-open .mobile-menu-toggle span:nth-child(3){
    transform: rotate(-45deg) translate(6px, -6px);
  }

  /* Overlay */
  .sidebar-overlay{
    display: block !important;
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,.5);
    z-index: 1999;
    opacity: 0;
    pointer-events: none;
    transition: opacity .3s ease;
  }
  .sidebar-overlay.active{
    opacity: 1;
    pointer-events: auto;
  }

  /* Sidebar drawer */
  .sidebar{
    position: fixed !important;
    left: -100% !important;
    top: 0 !important;
    width: min(86vw, 320px) !important;
    height: 100vh !important;
    z-index: 2000 !important;
    transition: left .3s ease !important;
    box-shadow: 2px 0 20px rgba(0,0,0,.3) !important;
    padding: 20px 16px !important;
  }
  .sidebar.open{
    left: 0 !important;
  }

  /* Logo / menu */
  .logo{
    margin-bottom: 20px !important;
    padding-bottom: 14px !important;
    border-bottom: 1px solid var(--border-subtle) !important;
  }

  .nav-menu{
    gap: 6px !important;
  }

  .nav-item{
    padding: 12px 14px !important;
  }

  .nav-item span:not(.icon){
    display: inline !important;
  }

  /* Main content full width */
  .main-content{
    margin-left: 0 !important;
    padding: 0 !important;
  }

  /* Header sticky compact */
  header{
    position: sticky !important;
    top: 0 !important;
    z-index: 100 !important;
    background: var(--bg-main) !important;
    border-bottom: 1px solid var(--border-subtle) !important;
    padding: 16px 16px 16px 70px !important;
    margin-bottom: 0 !important;
    flex-wrap: nowrap !important;
  }

  .sync-status{
    display: none !important;
  }

  .privacy-btn,
  .update-btn{
    font-size: 0.78em !important;
    padding: 8px 12px !important;
  }

  /* Sections padding */
  .container{
    padding: 16px !important;
  }

  /* Stats: 1 colonne */
  .stats-grid{
    grid-template-columns: 1fr !important;
    gap: 12px !important;
    margin-bottom: 16px !important;
  }

  /* Assets: stats en 2 colonnes */
  .asset-header{
    flex-direction: column !important;
    align-items: flex-start !important;
    gap: 14px !important;
  }

  .asset-stats{
    grid-template-columns: repeat(2, minmax(0, 1fr)) !important;
    gap: 10px !important;
    text-align: left !important;
  }

  /* Table scroll horizontale */
  table{
    display: block !important;
    overflow-x: auto !important;
    -webkit-overflow-scrolling: touch !important;
    font-size: 0.9em !important;
  }
  th, td{
    white-space: nowrap !important;
  }

  /* Inputs: Ã©viter le zoom iOS */
  input, select, textarea{
    font-size: 16px !important;
  }

  /* Chart plus compact */
  .chart-container{
    height: 240px !important;
    padding: 16px !important;
    margin: 16px 0 !important;
  }
}

/* 6) PETITS MOBILES (<= 420px) */
@media (max-width: 420px){
  header{
    padding-left: 64px !important;
  }

  .privacy-btn,
  .update-btn{
    padding: 8px 10px !important;
  }

  .asset-stats{
    grid-template-columns: 1fr !important;
  }
}

/* 7) Desktop : cacher Ã©lÃ©ments mobiles */
@media (min-width: 1025px){
  .mobile-menu-toggle,
  .sidebar-overlay{
    display: none !important;
  }

  .sidebar{
    width: var(--sidebar-w);
  }

  .main-content{
    margin-left: var(--sidebar-w);
  }
}
